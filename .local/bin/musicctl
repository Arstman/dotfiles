#!/bin/sh
# Called upon by dwmblocks when signalled

# Start signaller if not running
pidof -x mpcsignal > /dev/null 2>&1 || mpcsignal > /dev/null 2>&1 &

if [ -n "$(mpc current)" ]; then
	status=$(mpc --format "" | grep "\[" | sed "s/[^a-z]//g")
	position=$(mpc --format "" | grep "\[" | sed "s/^.*#//;s/[[:space:]].*$//g" )
	case "$status" in
		playing)
			icon="▶️"
			;;
		paused)
			icon="⏸️"
			;;
	esac

	printf "%s%s\n" "$icon" "$(mpc -f %title% current) [$position]"
fi
