#!/bin/sh

swaymsg mode "default"

choices=$(swaymsg -t get_inputs | jq '.[0].xkb_layout_names' | sed -Ez \
's/\[\n//g;s/\]\n//g;s/"//g;s/\),/\)/g' | nl -w 1 -s ": " -v 0)

chosen=$(echo "$choices" | wofi -d --prompt "Choose keyboard layout")
code=$(echo "$chosen" | sed -E 's/:.*$//g')

swaymsg input type:keyboard xkb_switch_layout $code

kill -RTMIN+1 $(pidof waybar)
